
/*! Lazy Load 1.9.3 - MIT license - Copyright 2010-2013 Mika Tuupola */
!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||c.attr("src")===!1)&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document);

/************************************************
 * jQuery iOS App Switcher
 *  - by Ryan Scherf
 * https://github.com/rscherf/Switcher/blob/master/source/jquery.switcher.js
 * Convert your site's links to URL
 * schemes to deeplink to iOS apps.
 ************************************************/
(function(e){e.fn.switcher=function(t){window.hasHidden=false;e(window).bind("blur pagehide",function(){window.hasHidden=true});var n=e.extend({additionalSchemas:[],debug:false,iOS:/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},t);if(n.iOS||n.debug){var r=[{pattern:/(facebook)/g,scheme:function(t){var n="";if(isNaN(parseInt(t))){e.ajax({url:"http://graph.facebook.com/"+t,type:"get",dataType:"json",async:false}).done(function(e){n=e.id})}else{n=t}return"fb://profile/"+n}},{pattern:/(linkedin)/g,scheme:function(e){return"linkedin://#profile/"+e}},{pattern:/(instagram)/g,scheme:function(e){return"instagram://user?username="+e}},{pattern:/(quirky)/g,scheme:function(e){return"quirky:///"+e}},{pattern:/(twitter)/g,scheme:function(e){return"twitter://user?screen_name="+e}}];r=r.concat(n.additionalSchemas);this.each(function(){var t=e(this),n=e(this).attr("href"),i=n.split(".com/");if(t.data("username"))username=t.data("username");else if(i.length>1)username=i[1];else username="notfound";e(r).each(function(e){if(r[e].pattern.test(n)){t.attr("href",r[e].scheme(username));t.bind("click",function(){setTimeout(function(){if(!window.hasHidden){window.location=n}else{window.hasHidden=false}},1e3)});return false}})})}return this}})(jQuery);


// --------------------------------------------------
// HashTabber v2.2 by smutnyleszek@gmail.com
// http://hashtabber.smutnyleszek.com
// License CC0 1.0
// --------------------------------------------------

function hasClass(a,t){return a.className&&new RegExp("(\\s|^)"+t+"(\\s|$)").test(a.className)}function addClass(a,t){hasClass(a,t)||(a.className+=" "+t)}function removeClass(a,t){var s=new RegExp("(\\s|^)"+t+"(\\s|$)");a.className=a.className.replace(s," ").replace(/(^\s*)|(\s*$)/g,"")}function toggleClass(a,t){hasClass(a,t)?removeClass(a,t):addClass(a,t)}function HashTabber(a){return this.options={classActive:"active",classData:"hashTabber-data",classNav:"hashTabber-nav",dataDefault:"data-hashtabber-default",dataId:"data-hashtabber-id",dataPair:"data-hashtabber-pair"},a&&(a.classActive&&(this.options.classActive=a.classActive),a.classData&&(this.options.classData=a.classData),a.classNav&&(this.options.classNav=a.classNav),a.dataDefault&&(this.options.dataDefault=a.dataDefault),a.dataId&&(this.options.dataId=a.dataId),a.dataPair&&(this.options.dataPair=a.dataPair)),this.helpers={hashProber:function(){var a=String(window.location.hash.replace("#","")),t=!1;return 0!==a.length&&(t=a.split(/\=|&/)),t},idsGiver:function(a){var t,s,e,r,l,i,c,n,d,o,h=document.querySelectorAll("."+a.classNav);for(t=0;t<h.length;t+=1){for(l=h[t].getAttribute(a.dataId),i="0",c="",h[t].getAttribute(a.dataDefault)&&(i=h[t].getAttribute(a.dataDefault)),n=h[t].querySelectorAll("."+a.classNav+">li"),s=0;s<n.length;s+=1){for(c=String(s),n[s].getAttribute(a.dataPair)&&(c=n[s].getAttribute(a.dataPair)),d=n[s].childNodes,e=0;e<d.length;e+=1)"A"===d[e].nodeName&&d[e].setAttribute("href","#"+l+"="+c);c===i&&addClass(n[s],a.classActive)}for(o=document.querySelectorAll("."+a.classData+"["+a.dataId+'="'+l+'"]>li'),r=0;r<o.length;r+=1)c=String(r),o[r].getAttribute(a.dataPair)&&(c=o[r].getAttribute(a.dataPair)),c===i&&addClass(o[r],a.classActive)}return!0},tabSwiper:function(a,t){var s,e,r,l,i,c,n,d;for(s=0;s<t.length;s+=2)if(l=t[s],i=t[s+1],c="",document.querySelectorAll("."+a.classNav+' a[href*="#'+l+"="+i+'"]').length>0){for(n=document.querySelectorAll("."+a.classNav+"["+a.dataId+'="'+l+'"]>li'),d=document.querySelectorAll("."+a.classData+"["+a.dataId+'="'+l+'"]>li'),e=0;e<n.length;e+=1)c=String(e),n[e].getAttribute(a.dataPair)&&(c=n[e].getAttribute(a.dataPair)),c===i?addClass(n[e],a.classActive):removeClass(n[e],a.classActive);for(r=0;r<d.length;r+=1)c=String(r),d[r].getAttribute(a.dataPair)&&(c=d[r].getAttribute(a.dataPair)),c===i?addClass(d[r],a.classActive):removeClass(d[r],a.classActive)}return!0}},this.run=function(){var a=this;return a.helpers.idsGiver(a.options),a.helpers.tabSwiper(a.options,a.helpers.hashProber()),window.onhashchange=function(){a.helpers.tabSwiper(a.options,a.helpers.hashProber())},!0},!0};


/*!
 *
 * @author Adam Henson
 * Licensed under the MIT license
 * https://github.com/adamhenson/lighterbox
 *
 */
!function(t,o,e){function i(o,e){s=t(o),this.options=t.extend({},a,e),this.init()}var s,n="lighterbox",a={overlayColor:"white",overlayOpacity:"0.95",animateSpeed:200,baseCss:{width:"auto",height:"auto","max-width":"100%","max-height":"100%",position:"fixed",top:"50%",right:"50%","z-index":"9998",opacity:"0"},loaderCss:{width:"30px",height:"30px",position:"fixed",left:"50%",bottom:"50%","margin-left":"-15px","z-index":"9997",background:"url('https://s3-us-west-2.amazonaws.com/nycg/loader-60x60.gif') no-repeat","background-size":"30px"},closeCss:{"font-size":"2em",color:"#000",position:"fixed",top:"0.5em",right:"0.5em","z-index":"9999",opacity:"0"},captionCss:{width:"100%","text-align":"center",background:"#000",color:"#fff",position:"fixed",bottom:"0",left:"0","z-index":"9999",opacity:"0"}};i.prototype.destroy=function(t){for(var o=this,e=o.options.animateSpeed+100,i=0;i<t.length;i++)t[i].css("opacity",0);setTimeout(function(){for(var o=0;o<t.length;o++)t[o].remove()},e)},i.prototype.reposition=function(t,o){var e=function(){var e=o.height()>0?o.height():0,i=-(Math.floor(parseInt(t.height())/2)+e/2),s=-Math.floor(parseInt(t.width())/2);t.css({"margin-top":i+"px","margin-right":s+"px"})};return{init:e}},i.prototype.init=function(){var i=this;s.on("click touchend",function(s){s.preventDefault();var a=t(this),r=a.find("."+n+"-title").text(),p=a.find("."+n+"-desc").text(),d="white"==i.options.overlayColor?"255, 255, 255":"0, 0, 0",c=e.createElement("div"),l=t(c),h=e.createElement("img"),f=t(h),m=e.createElement("div"),u=t(m),g=e.createElement("div"),y=t(g),v=e.createElement("a"),C=t(v),x=!1;i.options.baseCss["-webkit-transition"]="all "+i.options.animateSpeed+"ms ease-in-out",i.options.baseCss["-moz-transition"]="all "+i.options.animateSpeed+"ms ease-in-out",i.options.baseCss["-o-transition"]="all "+i.options.animateSpeed+"ms ease-in-out",i.options.baseCss.transition="all "+i.options.animateSpeed+"ms ease-in-out",f.addClass(n+"-img").attr("src",a.attr("href")).css(i.options.baseCss).appendTo("body");var b={};for(var w in i.options.baseCss)b[w]=i.options.baseCss[w];b.width="100%",b.height="100%",b.top="0",b.left="0",b["z-index"]="9997",b.background="rgb("+d+")",l.addClass(n+"-overlay").css(b).appendTo(t("body")).add(C).on("click touchend",function(e){e.preventDefault(),e.stopPropagation(),i.destroy([l,f,C,y]),x!==!1&&t(o).off("resize",x.init)}),u.addClass(n+"-loader").css(i.options.loaderCss).appendTo(l),"white"!=i.options.overlayColor&&(i.options.closeCss.color="#fff"),C.addClass(n+"-close").attr("href","#").html("x").css(i.options.closeCss).appendTo("body"),"white"!=i.options.overlayColor&&(i.options.captionCss.color="#000",i.options.captionCss.background="#fff"),y.addClass(n+"-caption").html("<p class='"+n+"-overlay-title'>"+r+"</p><p class='"+n+"-overlay-desc'>"+p+"</p>").css(i.options.captionCss).appendTo("body"),y.find("."+n+"-overlay-title").css({margin:"0.5em"}),y.find("."+n+"-overlay-desc").css({margin:"0 0.5em 0.5em"}),f.load(function(){x=new i.reposition(t(this),y),x.init(),t(o).resize(x.init),i.destroy([u]),setTimeout(function(){f.css("opacity",1)},i.options.animateSpeed)}),setTimeout(function(){l.add(C).add(y).css("opacity",i.options.overlayOpacity)},1)})},t.fn[n]=function(o){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new i(this,o))})}}(jQuery,window,document);

/*
Copyright © 2015 S. William & A.M. Pritchard
Licensed Under MIT
https://github.com/html5andblog/brick-by-brickJS
*/

/*
Includes Window Debounce Resize Function
Copyright © 2014 Louis-Rémi Babé - MIT Licensed - https://github.com/louisremi/jquery-smartresize
*/

!function(n){function e(n,e){return onresize=function(){clearTimeout(e),e=setTimeout(n,100)},n}function i(){var e=n(".b-by-b-item").width(),i=100/(parseInt(e)/c.width()*100),t=Math.round(i);return t}function t(){u=c.children(".b-by-b-item"),u.remove(),n(d).appendTo(c),u.removeAttr("data-column"),n(".single-column").remove()}function r(n){n.css({padding:p.itemPadding,"margin-top":p.itemMargin,"margin-bottom":p.itemMargin,"box-sizing":"border-box"})}function a(e){for(var i=0;e>i;i++)c.prepend('<div class="single-column 1of'+e+'"></div>');c.children(".single-column").css({"float":"left",width:100/e+"%","padding-left":p.itemMargin/2,"padding-right":p.itemMargin/2,"box-sizing":"border-box"}),u=c.children(".b-by-b-item"),r(u);for(var i=0;e>i;i++)u.filter(function(n){return n%e===i}).attr("data-column",i);n.each(u,function(i,t){var r=("#"+n(t).attr("id"),n(t).attr("data-column")),a=".1of"+e+":eq("+r+")";n(this).appendTo(a)}),n(".b-by-b-item").fadeIn(500)}function o(){var e;e=c.prop("id").length>0?"#"+c.prop("id"):"."+c.prop("class"),n("head").append("<style>"+e+':after { content:""; display:table; clear:both; }</style>')}var d,s,c,u,f=null,l=1e3,p=null,h={init:function(r){var l,h;return p=n.extend({itemMargin:5,itemPadding:5},r),n(this).children("div, section, article, img, a").addClass("b-by-b-item"),c=n(this),u=c.children(".b-by-b-item"),c.css("width","100%"),d=u.clone(),f=d,s=u.clone(),e(function(){c.hasClass("no-grid")||(t(),h=i(),a(h)),c.css("width","100%")}),n(window).resize(),t(),l=i(),a(l),o(),this},addAfter:function(e){for(var o,u=0;u<e.length;u++){var l=n(e[u]).addClass("b-by-b-item");[].push.apply(f,n.makeArray(l)),[].push.apply(s,n.makeArray(l))}d=n.grep(f,function(n){return"undefined"!=typeof n}),t(),c.hasClass("no-grid")?r(c.children(".b-by-b-item")):(o=i(),a(o))},addBefore:function(e){for(var o,u=0;u<e.length;u++){var l=n(e[u]).addClass("b-by-b-item");[].unshift.apply(s,n.makeArray(l)),[].unshift.apply(f,n.makeArray(l))}d=n.grep(f,function(n){return"undefined"!=typeof n}),t(),c.hasClass("no-grid")?r(c.children(".b-by-b-item")):(o=i(),a(o))},removeItems:function(e,r){var o;"undefined"==typeof r&&(r=l),n.each(e,function(e,i){for(var t=0;t<s.length;t++)n(s[t]).is(i)&&(n(i).animate({opacity:0},r),s.splice(t,1),f.splice(t,1),t--)}),d=n.grep(f,function(n){return"undefined"!=typeof n}),setTimeout(function(){t(),c.hasClass("no-grid")||(o=i(),a(o))},r+1)},hideItems:function(e,r){var o;"undefined"==typeof r&&(r=l),n.each(e,function(e,i){for(var t=0;t<f.length;t++)n(i).animate({opacity:0},r),n(f[t]).is(i)&&(delete f[t],t--)}),d=n.grep(f,function(n){return"undefined"!=typeof n}),setTimeout(function(){t(),c.hasClass("no-grid")||(o=i(),a(o))},r+1)},showItems:function(e,o){"undefined"==typeof o&&(o=l);var u,p=s;n.each(e,function(e,i){for(var t=0;t<p.length;t++)n(p[t]).is(i)&&(f[t]=p[t])}),d=n.grep(f,function(n){return"undefined"!=typeof n}),t(),n.each(e,function(e,i){n(i).css("opacity",0)}),c.hasClass("no-grid")||(u=i(),a(u)),n.each(e,function(e,i){n(i).animate({opacity:1},o),r(n(i))})},reload:function(){var n;c.hasClass("no-grid")&&(c.removeClass("no-grid"),t(),n=i(),a(n))},end:function(){c.hasClass("no-grid")||(t(),c.addClass("no-grid"))}};n.fn.layout=function(e){return h[e]?h[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(n.error("Method "+e+" does not exist in Brick by Brick JS"),void 0):h.init.apply(this,arguments)}}(jQuery);


/*
 *  Remodal - v0.6.3
 *  Flat, responsive, lightweight, easy customizable modal window plugin with declarative state notation and hash tracking.
 *  http://vodkabears.github.io/remodal/
 *
 *  Made by Ilya Makarov
 *  Under MIT License
 */
!function(a){"use strict";function b(a){var b,c,d,e,f=a.css("transition-duration")||a.css("-webkit-transition-duration")||a.css("-moz-transition-duration")||a.css("-o-transition-duration")||a.css("-ms-transition-duration")||"0s",g=a.css("transition-delay")||a.css("-webkit-transition-delay")||a.css("-moz-transition-delay")||a.css("-o-transition-delay")||a.css("-ms-transition-delay")||"0s";for(f=f.split(", "),g=g.split(", "),e=0,c=f.length,b=Number.NEGATIVE_INFINITY;c>e;e++)d=parseFloat(f[e])+parseFloat(g[e]),d>b&&(b=d);return 1e3*d}function c(){if(a(document.body).height()<=a(window).height())return 0;var b,c,d=document.createElement("div"),e=document.createElement("div");return d.style.visibility="hidden",d.style.width="100px",document.body.appendChild(d),b=d.offsetWidth,d.style.overflow="scroll",e.style.width="100%",d.appendChild(e),c=e.offsetWidth,d.parentNode.removeChild(d),b-c}function d(){var b,d,e=a("html"),f=l+"-is-locked";e.hasClass(f)||(d=a(document.body),b=parseInt(d.css("padding-right"),10)+c(),d.css("padding-right",b+"px"),e.addClass(f))}function e(){var b,d,e=a("html"),f=l+"-is-locked";e.hasClass(f)&&(d=a(document.body),b=parseInt(d.css("padding-right"),10)-c(),d.css("padding-right",b+"px"),e.removeClass(f))}function f(a){var b,c,d,e,f={};for(a=a.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,","),b=a.split(","),e=0,c=b.length;c>e;e++)b[e]=b[e].split(":"),d=b[e][1],("string"==typeof d||d instanceof String)&&(d="true"===d||("false"===d?!1:d)),("string"==typeof d||d instanceof String)&&(d=isNaN(d)?d:+d),f[b[e][0]]=d;return f}function g(c,d){var e,f,g,h=this;h.settings=a.extend({},m,d),h.$body=a(document.body),h.$overlay=a("."+l+"-overlay"),h.$overlay.length||(h.$overlay=a("<div>").addClass(l+"-overlay"),h.$body.append(h.$overlay)),h.$bg=a("."+l+"-bg"),h.$closeButton=a('<a href="#"></a>').addClass(l+"-close"),h.$wrapper=a("<div>").addClass(l+"-wrapper"),h.$modal=c,h.$modal.addClass(l),h.$modal.css("visibility","visible"),h.$modal.append(h.$closeButton),h.$wrapper.append(h.$modal),h.$body.append(h.$wrapper),h.$confirmButton=h.$modal.find("."+l+"-confirm"),h.$cancelButton=h.$modal.find("."+l+"-cancel"),e=b(h.$overlay),f=b(h.$modal),g=b(h.$bg),h.td=f>e?f:e,h.td=g>h.td?g:h.td,h.$wrapper.on("click."+l,"."+l+"-close",function(a){a.preventDefault(),h.close()}),h.$wrapper.on("click."+l,"."+l+"-cancel",function(a){a.preventDefault(),h.$modal.trigger("cancel"),h.settings.closeOnCancel&&h.close("cancellation")}),h.$wrapper.on("click."+l,"."+l+"-confirm",function(a){a.preventDefault(),h.$modal.trigger("confirm"),h.settings.closeOnConfirm&&h.close("confirmation")}),a(document).on("keyup."+l,function(a){27===a.keyCode&&h.settings.closeOnEscape&&h.close()}),h.$wrapper.on("click."+l,function(b){var c=a(b.target);c.hasClass(l+"-wrapper")&&h.settings.closeOnAnyClick&&h.close()}),h.index=a[k].lookup.push(h)-1,h.busy=!1}function h(b,c){var d,e,f=location.hash.replace("#","");if("undefined"==typeof c&&(c=!0),f){try{e=a("[data-"+k+"-id="+f.replace(new RegExp("/","g"),"\\/")+"]")}catch(g){}e&&e.length&&(d=a[k].lookup[e.data(k)],d&&d.settings.hashTracking&&d.open())}else c&&i&&!i.busy&&i.settings.hashTracking&&i.close()}var i,j,k="remodal",l=window.remodalGlobals&&window.remodalGlobals.namespace||k,m=a.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnAnyClick:!0},window.remodalGlobals&&window.remodalGlobals.defaults);g.prototype.open=function(){if(!this.busy){var b,c=this;c.busy=!0,c.$modal.trigger("open"),b=c.$modal.attr("data-"+k+"-id"),b&&c.settings.hashTracking&&(j=a(window).scrollTop(),location.hash=b),i&&i!==c&&(i.$overlay.hide(),i.$wrapper.hide(),i.$body.removeClass(l+"-is-active")),i=c,d(),c.$overlay.show(),c.$wrapper.show(),setTimeout(function(){c.$body.addClass(l+"-is-active"),setTimeout(function(){c.busy=!1,c.$modal.trigger("opened")},c.td+50)},25)}},g.prototype.close=function(b){if(!this.busy){var c=this;c.busy=!0,c.$modal.trigger({type:"close",reason:b}),c.settings.hashTracking&&c.$modal.attr("data-"+k+"-id")===location.hash.substr(1)&&(location.hash="",a(window).scrollTop(j)),c.$body.removeClass(l+"-is-active"),setTimeout(function(){c.$overlay.hide(),c.$wrapper.hide(),e(),c.busy=!1,c.$modal.trigger({type:"closed",reason:b})},c.td+50)}},a[k]={lookup:[]},a.fn[k]=function(b){var c,d;return this.each(function(e,f){d=a(f),null==d.data(k)?(c=new g(d,b),d.data(k,c.index),c.settings.hashTracking&&d.attr("data-"+k+"-id")===location.hash.substr(1)&&c.open()):c=a[k].lookup[d.data(k)]}),c},a(document).ready(function(){a(document).on("click","[data-"+k+"-target]",function(b){b.preventDefault();var c=b.currentTarget,d=c.getAttribute("data-"+k+"-target"),e=a("[data-"+k+"-id="+d+"]");a[k].lookup[e.data(k)].open()}),a(document).find("."+l).each(function(b,c){var d=a(c),e=d.data(k+"-options");e?("string"==typeof e||e instanceof String)&&(e=f(e)):e={},d[k](e)})}),a(window).bind("hashchange."+l,h)}(window.jQuery||window.Zepto);



/*
	lightbox effect
	By Osvaldas Valutis, www.osvaldas.info
	Available for use under the MIT License
	http://osvaldas.info/image-lightbox-responsive-touch-friendly
*/

;(function(e,t,n,r){"use strict";var i=function(){var e=n.body||n.documentElement,e=e.style;if(e.WebkitTransition=="")return"-webkit-";if(e.MozTransition=="")return"-moz-";if(e.OTransition=="")return"-o-";if(e.transition=="")return"";return false},s=i()===false?false:true,o=function(e,t,n){var r={},s=i();r[s+"transform"]="translateX("+t+")";r[s+"transition"]=s+"transform "+n+"s linear";e.css(r)},u="ontouchstart"in t,a=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,f=function(e){if(u)return true;if(!a||typeof e==="undefined"||typeof e.pointerType==="undefined")return false;if(typeof e.MSPOINTER_TYPE_MOUSE!=="undefined"){if(e.MSPOINTER_TYPE_MOUSE!=e.pointerType)return true}else if(e.pointerType!="mouse")return true;return false};e.fn.imageLightbox=function(r){var r=e.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,preloadNext:true,enableKeyboard:true,quitOnEnd:false,quitOnImgClick:false,quitOnDocClick:true,onStart:false,onEnd:false,onLoadStart:false,onLoadEnd:false},r),i=e([]),l=e(),c=e(),h=0,p=0,d=0,v=false,m=function(t){return e(t).prop("tagName").toLowerCase()=="a"&&(new RegExp(".("+r.allowedTypes+")$","i")).test(e(t).attr("href"))},g=function(){if(!c.length)return true;var n=e(t).width()*.8,r=e(t).height()*.9,i=new Image;i.src=c.attr("src");i.onload=function(){h=i.width;p=i.height;if(h>n||p>r){var s=h/p>n/r?h/n:p/r;h/=s;p/=s}c.css({width:h+"px",height:p+"px",top:(e(t).height()-p)/2+"px",left:(e(t).width()-h)/2+"px"})}},y=function(t){if(v)return false;t=typeof t==="undefined"?false:t=="left"?1:-1;if(c.length){if(t!==false&&(i.length<2||r.quitOnEnd===true&&(t===-1&&i.index(l)==0||t===1&&i.index(l)==i.length-1))){w();return false}var n={opacity:0};if(s)o(c,100*t-d+"px",r.animationSpeed/1e3);else n.left=parseInt(c.css("left"))+100*t+"px";c.animate(n,r.animationSpeed,function(){b()});d=0}v=true;if(r.onLoadStart!==false)r.onLoadStart();setTimeout(function(){c=e("<img "+r.selector+" />").attr("src",l.attr("href")).load(function(){c.appendTo("body");g();var n={opacity:1};c.css("opacity",0);if(s){o(c,-100*t+"px",0);setTimeout(function(){o(c,0+"px",r.animationSpeed/1e3)},50)}else{var u=parseInt(c.css("left"));n.left=u+"px";c.css("left",u-100*t+"px")}c.animate(n,r.animationSpeed,function(){v=false;if(r.onLoadEnd!==false)r.onLoadEnd()});if(r.preloadNext){var a=i.eq(i.index(l)+1);if(!a.length)a=i.eq(0);e("<img />").attr("src",a.attr("href")).load()}}).error(function(){if(r.onLoadEnd!==false)r.onLoadEnd()});var n=0,u=0,p=0;c.on(a?"pointerup MSPointerUp":"click",function(e){e.preventDefault();if(r.quitOnImgClick){w();return false}if(f(e.originalEvent))return true;var t=(e.pageX||e.originalEvent.pageX)-e.target.offsetLeft;l=i.eq(i.index(l)-(h/2>t?1:-1));if(!l.length)l=i.eq(h/2>t?i.length:0);y(h/2>t?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(e){if(!f(e.originalEvent)||r.quitOnImgClick)return true;if(s)p=parseInt(c.css("left"));n=e.originalEvent.pageX||e.originalEvent.touches[0].pageX}).on("touchmove pointermove MSPointerMove",function(e){if(!f(e.originalEvent)||r.quitOnImgClick)return true;e.preventDefault();u=e.originalEvent.pageX||e.originalEvent.touches[0].pageX;d=n-u;if(s)o(c,-d+"px",0);else c.css("left",p-d+"px")}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(e){if(!f(e.originalEvent)||r.quitOnImgClick)return true;if(Math.abs(d)>50){l=i.eq(i.index(l)-(d<0?1:-1));if(!l.length)l=i.eq(d<0?i.length:0);y(d>0?"right":"left")}else{if(s)o(c,0+"px",r.animationSpeed/1e3);else c.animate({left:p+"px"},r.animationSpeed/2)}})},r.animationSpeed+100)},b=function(){if(!c.length)return false;c.remove();c=e()},w=function(){if(!c.length)return false;c.animate({opacity:0},r.animationSpeed,function(){b();v=false;if(r.onEnd!==false)r.onEnd()})};e(t).on("resize",g);if(r.quitOnDocClick){e(n).on(u?"touchend":"click",function(t){if(c.length&&!e(t.target).is(c))w()})}if(r.enableKeyboard){e(n).on("keyup",function(e){if(!c.length)return true;e.preventDefault();if(e.keyCode==27)w();if(e.keyCode==37||e.keyCode==39){l=i.eq(i.index(l)-(e.keyCode==37?1:-1));if(!l.length)l=i.eq(e.keyCode==37?i.length:0);y(e.keyCode==37?"left":"right")}})}e(n).on("click",this.selector,function(t){if(!m(this))return true;t.preventDefault();if(v)return false;v=false;if(r.onStart!==false)r.onStart();l=e(this);y()});this.each(function(){if(!m(this))return true;i=i.add(e(this))});this.switchImageLightbox=function(e){var t=i.eq(e);if(t.length){var n=i.index(l);l=t;y(e<n?"left":"right")}return this};this.quitImageLightbox=function(){w();return this};return this}})(jQuery,window,document);


/*! jquery.finger - v0.1.0 - 2014-02-19
* https://github.com/ngryman/jquery.finger
* Copyright (c) 2014 Nicolas Gryman; Licensed MIT */
!function(e,t){function a(t){t.preventDefault(),e.event.remove(T,"click",a)}function n(e,t){return(p?t.originalEvent.touches[0]:t)["page"+e.toUpperCase()]}function r(t,n,r){var o=e.Event(n,b);e.event.trigger(o,{originalEvent:t},t.target),o.isDefaultPrevented()&&(~n.indexOf("tap")&&!p?e.event.add(T,"click",a):t.preventDefault()),r&&(e.event.remove(T,y+"."+D,i),e.event.remove(T,x+"."+D,d))}function o(t){var o=t.timeStamp||+new Date;l!=o&&(l=o,k.x=b.x=n("x",t),k.y=b.y=n("y",t),k.time=o,k.target=t.target,b.orientation=null,b.end=!1,u=!1,c=!1,v=setTimeout(function(){c=!0,r(t,"press")},e.Finger.pressDuration),e.event.add(T,y+"."+D,i),e.event.add(T,x+"."+D,d),w.preventDefault&&(t.preventDefault(),e.event.add(T,"click",a)))}function i(t){if(b.x=n("x",t),b.y=n("y",t),b.dx=b.x-k.x,b.dy=b.y-k.y,b.adx=Math.abs(b.dx),b.ady=Math.abs(b.dy),u=b.adx>w.motionThreshold||b.ady>w.motionThreshold){for(clearTimeout(v),b.orientation||(b.adx>b.ady?(b.orientation="horizontal",b.direction=b.dx>0?1:-1):(b.orientation="vertical",b.direction=b.dy>0?1:-1));t.target&&t.target!==k.target;)t.target=t.target.parentNode;return t.target!==k.target?(t.target=k.target,void d.call(this,e.Event(x+"."+D,t))):void r(t,"drag")}}function d(e){var t,a=e.timeStamp||+new Date,n=a-k.time;if(clearTimeout(v),u||c||e.target!==k.target)e.target=k.target,n<w.flickDuration&&r(e,"flick"),b.end=!0,t="drag";else{var o=g===e.target&&a-s<w.doubleTapInterval;t=o?"doubletap":"tap",g=o?null:k.target,s=a}r(e,t,!0)}var u,c,l,v,g,s,f=/chrome/i.exec(t),m=/android/i.exec(t),p="ontouchstart"in window&&!(f&&!m),h=p?"touchstart":"mousedown",x=p?"touchend touchcancel":"mouseup mouseleave",y=p?"touchmove":"mousemove",D="finger",T=e("html")[0],k={},b={},w=e.Finger={pressDuration:300,doubleTapInterval:300,flickDuration:150,motionThreshold:5};e.event.add(T,h+"."+D,o),e.each("tap doubletap press drag flick".split(" "),function(t,a){e.fn[a]=function(e){return e?this.on(a,e):this.trigger(a)}})}(jQuery,navigator.userAgent);


/*global jQuery */
/*jshint browser:true */
/*!
* FitVids 1.1
*
* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
*/
(function(e){"use strict";e.fn.fitVids=function(t){var n={customSelector:null};if(!document.getElementById("fit-vids-style")){var r=document.head||document.getElementsByTagName("head")[0];var i=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}";var s=document.createElement("div");s.innerHTML='<p>x</p><style id="fit-vids-style">'+i+"</style>";r.appendChild(s.childNodes[1])}if(t){e.extend(n,t)}return this.each(function(){var t=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];if(n.customSelector){t.push(n.customSelector)}var r=e(this).find(t.join(","));r=r.not("object object");r.each(function(){var t=e(this);if(this.tagName.toLowerCase()==="embed"&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length){return}var n=this.tagName.toLowerCase()==="object"||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),r=!isNaN(parseInt(t.attr("width"),10))?parseInt(t.attr("width"),10):t.width(),i=n/r;if(!t.attr("id")){var s="fitvid"+Math.floor(Math.random()*999999);t.attr("id",s)}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",i*100+"%");t.removeAttr("height").removeAttr("width")})})}})(window.jQuery||window.Zepto);

/*! TinySort 1.5.6
* Copyright (c) 2008-2013 Ron Valstar http://tinysort.sjeiti.com/
* License:
*     MIT: http://www.opensource.org/licenses/mit-license.php
*     GPL: http://www.gnu.org/licenses/gpl.html
*/
!function(a,b){"use strict";function c(a){return a&&a.toLowerCase?a.toLowerCase():a}function d(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return!e;return e}var e=!1,f=null,g=parseFloat,h=Math.min,i=/(-?\d+\.?\d*)$/g,j=/(\d+\.?\d*)$/g,k=[],l=[],m=function(a){return"string"==typeof a},n=function(a,b){for(var c,d=a.length,e=d;e--;)c=d-e-1,b(a[c],c)},o=Array.prototype.indexOf||function(a){var b=this.length,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1};a.tinysort={id:"TinySort",version:"1.5.6",copyright:"Copyright (c) 2008-2013 Ron Valstar",uri:"http://tinysort.sjeiti.com/",licensed:{MIT:"http://www.opensource.org/licenses/mit-license.php",GPL:"http://www.gnu.org/licenses/gpl.html"},plugin:function(){var a=function(a,b){k.push(a),l.push(b)};return a.indexOf=o,a}(),defaults:{order:"asc",attr:f,data:f,useVal:e,place:"start",returns:e,cases:e,forceStrings:e,ignoreDashes:e,sortFunction:f}},a.fn.extend({tinysort:function(){var p,q,r,s,t=this,u=[],v=[],w=[],x=[],y=0,z=[],A=[],B=function(a){n(k,function(b){b.call(b,a)})},C=function(a,b){return"string"==typeof b&&(a.cases||(b=c(b)),b=b.replace(/^\s*(.*?)\s*$/i,"$1")),b},D=function(a,b){var c=0;for(0!==y&&(y=0);0===c&&s>y;){var d=x[y],f=d.oSettings,h=f.ignoreDashes?j:i;if(B(f),f.sortFunction)c=f.sortFunction(a,b);else if("rand"==f.order)c=Math.random()<.5?1:-1;else{var k=e,o=C(f,a.s[y]),p=C(f,b.s[y]);if(!f.forceStrings){var q=m(o)?o&&o.match(h):e,r=m(p)?p&&p.match(h):e;if(q&&r){var t=o.substr(0,o.length-q[0].length),u=p.substr(0,p.length-r[0].length);t==u&&(k=!e,o=g(q[0]),p=g(r[0]))}}c=d.iAsc*(p>o?-1:o>p?1:0)}n(l,function(a){c=a.call(a,k,o,p,c)}),0===c&&y++}return c};for(p=0,r=arguments.length;r>p;p++){var E=arguments[p];m(E)?z.push(E)-1>A.length&&(A.length=z.length-1):A.push(E)>z.length&&(z.length=A.length)}for(z.length>A.length&&(A.length=z.length),s=z.length,0===s&&(s=z.length=1,A.push({})),p=0,r=s;r>p;p++){var F=z[p],G=a.extend({},a.tinysort.defaults,A[p]),H=!(!F||""===F),I=H&&":"===F[0];x.push({sFind:F,oSettings:G,bFind:H,bAttr:!(G.attr===f||""===G.attr),bData:G.data!==f,bFilter:I,$Filter:I?t.filter(F):t,fnSort:G.sortFunction,iAsc:"asc"==G.order?1:-1})}return t.each(function(c,d){var e,f=a(d),g=f.parent().get(0),h=[];for(q=0;s>q;q++){var i=x[q],j=i.bFind?i.bFilter?i.$Filter.filter(d):f.find(i.sFind):f;h.push(i.bData?j.data(i.oSettings.data):i.bAttr?j.attr(i.oSettings.attr):i.oSettings.useVal?j.val():j.text()),e===b&&(e=j)}var k=o.call(w,g);0>k&&(k=w.push(g)-1,v[k]={s:[],n:[]}),e.length>0?v[k].s.push({s:h,e:f,n:c}):v[k].n.push({e:f,n:c})}),n(v,function(a){a.s.sort(D)}),n(v,function(a){var b=a.s,c=a.n,f=b.length,g=c.length,i=f+g,j=[],k=i,l=[0,0];switch(G.place){case"first":n(b,function(a){k=h(k,a.n)});break;case"org":n(b,function(a){j.push(a.n)});break;case"end":k=g;break;default:k=0}for(p=0;i>p;p++){var m=d(j,p)?!e:p>=k&&k+f>p,o=m?0:1,q=(m?b:c)[l[o]].e;q.parent().append(q),(m||!G.returns)&&u.push(q.get(0)),l[o]++}}),t.length=0,Array.prototype.push.apply(t,u),t}}),a.fn.TinySort=a.fn.Tinysort=a.fn.tsort=a.fn.tinysort}(jQuery);


/*skip-link-focus-fix*/
(function(){var e=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,t=navigator.userAgent.toLowerCase().indexOf("opera")>-1,n=navigator.userAgent.toLowerCase().indexOf("msie")>-1;if((e||t||n)&&"undefined"!==typeof document.getElementById){var r=window.addEventListener?"addEventListener":"attachEvent";window[r]("hashchange",function(){var e=document.getElementById(location.hash.substring(1));if(e){if(!/^(?:a|select|input|button|textarea)$/i.test(e.tagName))e.tabIndex=-1;e.focus()}},false)}})();

/*! url - v1.8.6 - 2013-11-22 */window.url=function(){function a(a){return!isNaN(parseFloat(a))&&isFinite(a)}return function(b,c){var d=c||window.location.toString();if(!b)return d;b=b.toString(),"//"===d.substring(0,2)?d="http:"+d:1===d.split("://").length&&(d="http://"+d),c=d.split("/");var e={auth:""},f=c[2].split("@");1===f.length?f=f[0].split(":"):(e.auth=f[0],f=f[1].split(":")),e.protocol=c[0],e.hostname=f[0],e.port=f[1]||("https"===e.protocol.split(":")[0].toLowerCase()?"443":"80"),e.pathname=(c.length>3?"/":"")+c.slice(3,c.length).join("/").split("?")[0].split("#")[0];var g=e.pathname;"/"===g.charAt(g.length-1)&&(g=g.substring(0,g.length-1));var h=e.hostname,i=h.split("."),j=g.split("/");if("hostname"===b)return h;if("domain"===b)return/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/.test(h)?h:i.slice(-2).join(".");if("sub"===b)return i.slice(0,i.length-2).join(".");if("port"===b)return e.port;if("protocol"===b)return e.protocol.split(":")[0];if("auth"===b)return e.auth;if("user"===b)return e.auth.split(":")[0];if("pass"===b)return e.auth.split(":")[1]||"";if("path"===b)return e.pathname;if("."===b.charAt(0)){if(b=b.substring(1),a(b))return b=parseInt(b,10),i[0>b?i.length+b:b-1]||""}else{if(a(b))return b=parseInt(b,10),j[0>b?j.length+b:b]||"";if("file"===b)return j.slice(-1)[0];if("filename"===b)return j.slice(-1)[0].split(".")[0];if("fileext"===b)return j.slice(-1)[0].split(".")[1]||"";if("?"===b.charAt(0)||"#"===b.charAt(0)){var k=d,l=null;if("?"===b.charAt(0)?k=(k.split("?")[1]||"").split("#")[0]:"#"===b.charAt(0)&&(k=k.split("#")[1]||""),!b.charAt(1))return k;b=b.substring(1),k=k.split("&");for(var m=0,n=k.length;n>m;m++)if(l=k[m].split("="),l[0]===b)return l[1]||"";return null}}return""}}(),"undefined"!=typeof jQuery&&jQuery.extend({url:function(a,b){return window.url(a,b)}});



